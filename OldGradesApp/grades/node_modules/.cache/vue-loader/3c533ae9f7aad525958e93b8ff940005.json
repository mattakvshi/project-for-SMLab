{"remainingRequest":"/home/mattakvshi/Documents/Vue project/SMLabProject/OldGradesApp/grades/node_modules/vue-loader/lib/index.js??vue-loader-options!/home/mattakvshi/Documents/Vue project/SMLabProject/OldGradesApp/grades/src/components/grade/GrdGrid.vue?vue&type=script&lang=js&","dependencies":[{"path":"/home/mattakvshi/Documents/Vue project/SMLabProject/OldGradesApp/grades/src/components/grade/GrdGrid.vue","mtime":1619524367000},{"path":"/home/mattakvshi/Documents/Vue project/SMLabProject/OldGradesApp/grades/node_modules/cache-loader/dist/cjs.js","mtime":1713025955242},{"path":"/home/mattakvshi/Documents/Vue project/SMLabProject/OldGradesApp/grades/node_modules/babel-loader/lib/index.js","mtime":1713025957998},{"path":"/home/mattakvshi/Documents/Vue project/SMLabProject/OldGradesApp/grades/node_modules/cache-loader/dist/cjs.js","mtime":1713025955242},{"path":"/home/mattakvshi/Documents/Vue project/SMLabProject/OldGradesApp/grades/node_modules/vue-loader/lib/index.js","mtime":1713025962170}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:Ly8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KDQpleHBvcnQgZGVmYXVsdCB7DQogICAgbmFtZTogIkdyZEdyaWQiLA0KDQogICAgZGF0YSgpIHsNCiAgICAgICAgcmV0dXJuIHsNCiAgICAgICAgICAgIGhlYWRlcnM6IFsNCiAgICAgICAgICAgICAgICB7dGV4dDogItCa0L7QtCIsIHZhbHVlOiAiY29kZSJ9LA0KICAgICAgICAgICAgICAgIHt0ZXh0OiAi0JrRg9GA0YEiLCB2YWx1ZTogImNvdXJzZU5hbWUifSwNCiAgICAgICAgICAgICAgICB7dGV4dDogItCk0JjQniIsIHZhbHVlOiAic3R1ZGVudE5hbWUifSwNCiAgICAgICAgICAgICAgICB7dGV4dDogItCT0YDQtdC50LQiLCB2YWx1ZTogImdyYWRlIn0sDQogICAgICAgICAgICAgICAge3RleHQ6ICLQlNCw0YLQsCIsIHZhbHVlOiAiZm9ybWF0R3JhZGVEYXRlIiwgYWxpZ246ICJjZW50ZXIifSwNCiAgICAgICAgICAgICAgICB7dGV4dDogItCj0LTQsNC70LjRgtGMIiwgdmFsdWU6ICJhY3Rpb25zIiwgYWxpZ246ICJjZW50ZXIiLCBzb3J0YWJsZTogZmFsc2V9DQogICAgICAgICAgICBdLA0KDQogICAgICAgICAgICBydWxlczogew0KICAgICAgICAgICAgICAgIGdyYWRlOiB2YWwgPT4gKHZhbCAmJiAhaXNOYU4odmFsKSAmJiB2YWwgPj0gMCAmJiB2YWwgPD0gMjUpIHx8ICLRh9C40YHQu9C+INC+0YIgMCDQtNC+IDI1Ig0KICAgICAgICAgICAgfSwNCg0KICAgICAgICAgICAgY3VycmVudEdyYWRlVmFsdWU6IG51bGwNCiAgICAgICAgfTsNCiAgICB9LA0KDQogICAgbWV0aG9kczogew0KICAgICAgICBvcGVuKHZhbHVlKSB7DQogICAgICAgICAgICB0aGlzLmN1cnJlbnRHcmFkZVZhbHVlID0gdmFsdWU7DQogICAgICAgIH0sDQogICAgICAgIGFzeW5jIHNhdmUoZWRpdCkgew0KICAgICAgICAgICAgbGV0IGlzRXJyb3IgPSAxOw0KICAgICAgICAgICAgaWYgKHRoaXMucnVsZXMuZ3JhZGUoZWRpdC5pdGVtLmdyYWRlKSA9PT0gdHJ1ZSkgew0KICAgICAgICAgICAgICAgIHRyeSB7DQogICAgICAgICAgICAgICAgICAgIGVkaXQuaXRlbS5ncmFkZSA9IE51bWJlcihlZGl0Lml0ZW0uZ3JhZGUpOw0KICAgICAgICAgICAgICAgICAgICBpc0Vycm9yID0gKGF3YWl0IHRoaXMuJHN0b3JlLmRpc3BhdGNoKCJncmFkZS9wdXRHcmFkZSIsIGVkaXQuaXRlbSkpLnJlc3VsdENvZGU7DQoNCiAgICAgICAgICAgICAgICB9IGNhdGNoIChlcnJvcikgew0KICAgICAgICAgICAgICAgICAgICBjb25zb2xlLmVycm9yKGVycm9yKTsNCiAgICAgICAgICAgICAgICB9DQogICAgICAgICAgICB9DQogICAgICAgICAgICANCiAgICAgICAgICAgIHNldFRpbWVvdXQoKCkgPT4gKGVkaXQuaXRlbS5ncmFkZSA9IGlzRXJyb3IgPyB0aGlzLmN1cnJlbnRHcmFkZVZhbHVlIDogTnVtYmVyKGVkaXQuaXRlbS5ncmFkZSkpKTsNCiAgICAgICAgfSwNCg0KICAgICAgICBkZWxldGVJdGVtKGdyYWRlKSB7DQogICAgICAgICAgICB0aGlzLiRzdG9yZS5kaXNwYXRjaCgiZ3JhZGUvZGVsZXRlR3JhZGUiLCBncmFkZSk7DQogICAgICAgIH0sDQoNCiAgICAgICAgaW5pdERhdGEoKSB7DQogICAgICAgICAgICB0aGlzLiRzdG9yZS5kaXNwYXRjaCgiZ3JhZGUvaW5pdERhdGEiKTsNCiAgICAgICAgfQ0KICAgIH0sDQoNCiAgICBjb21wdXRlZDogew0KICAgICAgICBhY3R1YWxHcmFkZXMoKSB7DQogICAgICAgICAgICByZXR1cm4gdGhpcy4kc3RvcmUuc3RhdGUuZ3JhZGUuZ3JhZGVzLmZpbHRlcihncmFkZSA9PiAhZ3JhZGUuaXNEZWxldGUpOw0KICAgICAgICB9DQogICAgfSwNCg0KICAgIGFzeW5jIG1vdW50ZWQoKSB7DQogICAgICAgIGF3YWl0IHRoaXMuJHN0b3JlLmRpc3BhdGNoKCJncmFkZS9nZXRDb3Vyc2VzIik7DQogICAgICAgIGF3YWl0IHRoaXMuJHN0b3JlLmRpc3BhdGNoKCJzdHVkZW50L2dldFN0dWRlbnRzIik7DQogICAgICAgIGF3YWl0IHRoaXMuJHN0b3JlLmRpc3BhdGNoKCJncmFkZS9nZXRHcmFkZXMiKTsNCiAgICB9DQp9Ow0K"},{"version":3,"sources":["GrdGrid.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAqDA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA","file":"GrdGrid.vue","sourceRoot":"src/components/grade","sourcesContent":["<template>\r\n    <v-data-table\r\n        :headers=\"headers\"\r\n        :items=\"actualGrades\"\r\n        :items-per-page=\"15\"\r\n        item-key=\"code\"\r\n        class=\"elevation-3\"\r\n    >\r\n\r\n        <template v-slot:top>\r\n            <v-toolbar dense>\r\n                <v-toolbar-title>Таблица грейдов</v-toolbar-title>\r\n                <v-spacer></v-spacer>\r\n                <v-btn class=\"primary text-lg-button\"\r\n                       @click=\"$store.state.grade.newGradeDialog = true\"\r\n                       x-small\r\n                       fab\r\n                >\r\n                +</v-btn>\r\n            </v-toolbar>\r\n        </template>\r\n\r\n        <template v-slot:item.grade=\"editGrade\">\r\n            <v-edit-dialog\r\n                :return-value.sync=\"editGrade.item.grade\"\r\n                @save=\"save(editGrade)\"\r\n                @open=\"open(editGrade.item.grade)\"\r\n            >\r\n                {{ editGrade.item.grade }}\r\n\r\n                <template v-slot:input>\r\n                    <v-text-field\r\n                        v-model=\"editGrade.item.grade\"\r\n                        :rules=\"[rules.grade]\"\r\n                        label=\"Грейд\"\r\n                    ></v-text-field>\r\n                </template>\r\n            </v-edit-dialog>\r\n        </template>\r\n\r\n        <template v-slot:item.actions=\"item\">\r\n            <v-icon @click=\"deleteItem(item.item)\">mdi-delete</v-icon>\r\n        </template>\r\n\r\n        <template v-slot:no-data v-if=\"!$store.state.isLoading\">\r\n            <v-btn small color=\"primary\" @click=\"initData\">\r\n                Восстановить данные\r\n            </v-btn>\r\n        </template>\r\n    </v-data-table>\r\n</template>\r\n\r\n<script>\r\nexport default {\r\n    name: \"GrdGrid\",\r\n\r\n    data() {\r\n        return {\r\n            headers: [\r\n                {text: \"Код\", value: \"code\"},\r\n                {text: \"Курс\", value: \"courseName\"},\r\n                {text: \"ФИО\", value: \"studentName\"},\r\n                {text: \"Грейд\", value: \"grade\"},\r\n                {text: \"Дата\", value: \"formatGradeDate\", align: \"center\"},\r\n                {text: \"Удалить\", value: \"actions\", align: \"center\", sortable: false}\r\n            ],\r\n\r\n            rules: {\r\n                grade: val => (val && !isNaN(val) && val >= 0 && val <= 25) || \"число от 0 до 25\"\r\n            },\r\n\r\n            currentGradeValue: null\r\n        };\r\n    },\r\n\r\n    methods: {\r\n        open(value) {\r\n            this.currentGradeValue = value;\r\n        },\r\n        async save(edit) {\r\n            let isError = 1;\r\n            if (this.rules.grade(edit.item.grade) === true) {\r\n                try {\r\n                    edit.item.grade = Number(edit.item.grade);\r\n                    isError = (await this.$store.dispatch(\"grade/putGrade\", edit.item)).resultCode;\r\n\r\n                } catch (error) {\r\n                    console.error(error);\r\n                }\r\n            }\r\n            \r\n            setTimeout(() => (edit.item.grade = isError ? this.currentGradeValue : Number(edit.item.grade)));\r\n        },\r\n\r\n        deleteItem(grade) {\r\n            this.$store.dispatch(\"grade/deleteGrade\", grade);\r\n        },\r\n\r\n        initData() {\r\n            this.$store.dispatch(\"grade/initData\");\r\n        }\r\n    },\r\n\r\n    computed: {\r\n        actualGrades() {\r\n            return this.$store.state.grade.grades.filter(grade => !grade.isDelete);\r\n        }\r\n    },\r\n\r\n    async mounted() {\r\n        await this.$store.dispatch(\"grade/getCourses\");\r\n        await this.$store.dispatch(\"student/getStudents\");\r\n        await this.$store.dispatch(\"grade/getGrades\");\r\n    }\r\n};\r\n</script>\r\n"]}]}